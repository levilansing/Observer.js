/**
 * @author Levi Lansing
 *
 * Copyright 2013 Levi Lansing
 * Licensed under the MIT license
 *
 * See readme for documentation and demo
 * https://github.com/levilansing/Observer/blob/master/README.md
 *
 * version 1.0.0
 */
(function($){function Observer(){this.eventRegistration={};this.configuration={liveSelectorParent:"body",liveSelectors:{click:"a,button",change:"input,select,textarea"}};var self=this;$(function(){var parent=$(self.configuration.liveSelectorParent);$.each(self.configuration.liveSelectors,function(event,selector){self.registerLiveEvents(parent,selector,event)})})}$.observer=new Observer();Observer.prototype.triggerEvent=function(event,params){if(event&&this.eventRegistration[event]){$.each(this.eventRegistration[event],function(){return !this[1].apply(this[0],params)})}};Observer.prototype.listenForEvents=function(target,handlerList){var self=this;$.each(handlerList,function(event,handler){self.listenForEvent(target,event,handler)})};Observer.prototype.listenForEvent=function(target,event,handler){if(!this.eventRegistration[event]){this.eventRegistration[event]=[]}this.eventRegistration[event].push([target,handler])};Observer.prototype.listenForEventOnce=function(target,event,handler){var self=this;(function(){self.listenForEvent(this,event,function(){self.stopListeningForEvent(this,event);handler.apply(target,arguments);});})();};function createEventName(jQueryElement,jQueryEventName){var event=jQueryElement.attr("href");if(event&&event.charAt(0)=="#"){event=event.slice(1)}else{event=jQueryElement.attr("name")||jQueryElement.attr("id")}if(!event){return null}event="on"+event.charAt(0).toUpperCase()+event.slice(1);jQueryEventName=jQueryEventName.toLowerCase();event+=jQueryEventName.charAt(0).toUpperCase()+jQueryEventName.slice(1);return event}Observer.prototype.registerEvents=function(jQueryCollection,jQueryEvent,eventName){if($.isArray(jQueryEvent)){for(var i=0;i<jQueryEvent.length;i++){this.registerEvents(jQueryCollection,$.trim(jQueryEvent[i]),eventName)}return}var self=this;jQueryCollection[jQueryEvent](function(e){var event=eventName||createEventName($(this),jQueryEvent);if(self.eventRegistration[event]){var element=this;$.each(self.eventRegistration[event],function(){e.preventDefault();return !this[1].call(this[0],e,element)})}})};Observer.prototype.registerLiveEvents=function(jQueryCollectionParent,jQuerySelector,jQueryEvent,eventName){if($.isArray(jQueryEvent)){for(var i=0;i<jQueryEvent.length;i++){this.registerEvents(jQueryCollectionParent,$.trim(jQueryEvent[i]),eventName)}return}var self=this;jQueryCollectionParent.on(jQueryEvent,jQuerySelector,function(e){var event=eventName||createEventName($(this),jQueryEvent);if(self.eventRegistration[event]){var element=this;$.each(self.eventRegistration[event],function(){e.preventDefault();return !this[1].call(this[0],e,element)})}})};Observer.prototype.stopListeningForEvent=function(target,eventName){if(!this.eventRegistration[eventName]){return}var reg=$.map(this.eventRegistration[eventName],function(registration){if(registration[0]==target){return null}return[registration]});if(reg.length==0){delete this.eventRegistration[eventName]}else{this.eventRegistration[eventName]=reg}};Observer.prototype.stopListening=function(target){var self=this;$.each(this.eventRegistration,function(eventName,event){var reg=$.map(event,function(registration){if(registration.target==target){return null}return[registration]});if(reg.length==0){delete self.eventRegistration[eventName]}else{self.eventRegistration[eventName]=reg}})}})(jQuery);